{{define "queue_list"}}
{{if .}}
{{range .}}
<div class="job">
    <div class="job-info">
        <div class="job-title">{{.Title}}</div>
        <div class="job-meta">{{.Artist}}</div>
    </div>
    <div style="text-align: right;">
        <span class="job-status status-{{.Status}}">{{.Status}}</span>
        {{if .Error}}<div style="color: #ef4444; font-size: 0.75rem;">{{.Error}}</div>{{end}}
        {{if or (eq .Status "queued") (eq .Status "resolving_tracks") (eq .Status "downloading")}}
        <button hx-post="/htmx/cancel/{{.ID}}" hx-target="#queue-list" hx-swap="innerHTML" class="btn btn-outline btn-sm" style="margin-top: 8px;">Cancel</button>
        {{end}}
        {{if or (eq .Status "failed") (eq .Status "cancelled")}}
        <button hx-post="/htmx/retry/{{.ID}}" hx-target="#queue-list" hx-swap="innerHTML" class="btn btn-outline btn-sm" style="margin-top: 8px;">Retry</button>
        {{end}}
    </div>
</div>
{{end}}
{{else}}
<div class="empty">Your download queue is empty.</div>
{{end}}
{{end}}
