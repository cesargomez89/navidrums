{{range .}}
<div class="card" style="flex-direction: row; justify-content: space-between; align-items: center; padding: 20px;">
    <div class="card-info">
        <strong style="font-size: 1.1rem;">{{.Title}}</strong>
        <span style="color: var(--text-secondary);">{{.Artist}}</span>
    </div>

    <div style="text-align: right; min-width: 200px;">
        <div class="status-{{.Status}}"
            style="font-weight: 700; text-transform: uppercase; font-size: 0.8rem; margin-bottom: 8px;">
            {{.Status}}
        </div>
        {{if eq .Status "downloading"}}
        <div style="width: 100%; background: var(--bg-input); height: 6px; border-radius: 3px; overflow: hidden;">
            <div style="width: {{.Progress}}%; background: var(--accent); height: 100%; transition: width 0.3s ease;">
            </div>
        </div>
        <div style="font-size: 0.8rem; color: var(--text-secondary); margin-top: 4px;">{{printf "%.0f" .Progress}}%
        </div>
        {{end}}

        {{if eq .Status "failed"}}
        <div style="font-size: 0.8rem; color: #ef4444; margin-top: 4px;">{{.Error}}</div>
        {{end}}

        {{if or (eq .Status "queued") (eq .Status "resolving_tracks") (eq .Status "downloading")}}
        <button hx-post="/htmx/cancel/{{.ID}}" hx-target="#queue-list" hx-swap="innerHTML" class="btn btn-secondary"
            style="margin-top: 10px; padding: 5px 10px; font-size: 0.8rem; background: rgba(239, 68, 68, 0.1); color: #ef4444; border: 1px solid rgba(239, 68, 68, 0.2);">
            Cancel
        </button>
        {{end}}
    </div>
</div>
{{else}}
<div class="no-results">
    <i data-lucide="inbox" style="width: 48px; height: 48px; margin-bottom: 16px; opacity: 0.5;"></i>
    <p>Your download queue is empty.</p>
</div>
{{end}}